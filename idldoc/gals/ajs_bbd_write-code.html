<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.0 on Fri Jan 16 23:50:50 2009 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>ajs_bbd_write.pro (Anthony Smith's IDL routines)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="ajs_bbd_write.pro (Anthony Smith's IDL routines)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>
<span class="comments">;+</span>
<span class="comments">; This procedure takes arrays describing the BBD (bivariate brightness</span>
<span class="comments">; distribution) and writes the data either to a binary file or to a</span>
<span class="comments">; text file.</span>
<span class="comments">;</span>
<span class="comments">; :Params:</span>
<span class="comments">;    bincentres1 : in, required, type="fltarr or dblarr(nbins1)"</span>
<span class="comments">;    bincentres2 : in, required, type="fltarr or dblarr(nbins2)"</span>
<span class="comments">;    phibbd : in, required, type="fltarr or dblarr(nbins1, nbins2)"</span>
<span class="comments">; :Keywords:</span>
<span class="comments">;    datfile : in, optional, type=string</span>
<span class="comments">;       Name of binary file for output (read using ajs_bbd_read)</span>
<span class="comments">;    txtfile : in, optional, type=string</span>
<span class="comments">;       Name of text file for output</span>
<span class="comments">; :History:</span>
<span class="comments">;    11 Jan 2008 Created, Anthony Smith</span>
<span class="comments">;-</span>
PRO ajs_bbd_write, bincentres1, bincentres2, phibbd, phibbderr, $
                   datfile=datfile, txtfile=txtfile
  compile_opt idl2

  <span class="comments">;; Write BBD to file</span>

  IF n_elements(datfile) GT 0 THEN BEGIN
      <span class="comments">;; Binary file</span>
      openw, unit, datfile, /get_lun
      writeu, unit, size(bincentres1, /type), size(bincentres1, /n_elements), $
              bincentres1, $
              size(bincentres2, /type), size(bincentres2, /n_elements), $ 
              bincentres2, $
              size(phibbd, /type), size(phibbd, /dimensions), phibbd, $
              size(phibbderr, /type), size(phibbderr, /dimensions), phibbderr
      free_lun, unit     
  ENDIF
  IF n_elements(txtfile) GT 0 THEN BEGIN
      <span class="comments">;; Text file</span>
      openw, unit, txtfile, /get_lun
      FOR i = 0, n_elements(bincentres1) - 1 DO BEGIN
          FOR j = 0, n_elements(bincentres2) - 1  DO BEGIN
              printf, unit, bincentres1[i], bincentres2[j], phibbd[i,j], $
                      phibbderr[i,j]
          ENDFOR
      ENDFOR 
      free_lun, unit
  ENDIF
END  
</code>
    </div>
  </body>
</html>