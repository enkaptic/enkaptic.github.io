<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.0 on Fri Jan 16 23:50:56 2009 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>ajs_schechter.pro (Anthony Smith's IDL routines)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="ajs_schechter.pro (Anthony Smith's IDL routines)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>
<span class="comments">;+</span>
<span class="comments">; This function generates a Schechter function along an input array of</span>
<span class="comments">; absolute magnitudes.</span>
<span class="comments">;</span>
<span class="comments">; Compatible with mpfit</span>
<span class="comments">;</span>
<span class="comments">; :Params:</span>
<span class="comments">;    absmag : in, required</span>
<span class="comments">;       Array of absolute magnitudes</span>
<span class="comments">;    params : in, optional</span>
<span class="comments">;       [mstar,alpha,phistar] OR input separately:</span>
<span class="comments">; :Keywords:</span>
<span class="comments">;    mstar : in, optional</span>
<span class="comments">;    alpha : in, optional</span>
<span class="comments">;    phistar : in, optional</span>
<span class="comments">;    loglum : in, optional</span>
<span class="comments">;       Set to /loglum to input log10 luminosity instead of absolute magnitudes</span>
<span class="comments">; :Returns:</span>
<span class="comments">;    Array of phi for corresponding absmag</span>
<span class="comments">; :History:</span>
<span class="comments">;    5 Sep 2007 Created, Anthony Smith</span>
<span class="comments">;</span>
<span class="comments">;    17 Jan 2008 Added loglum keyword, AJS</span>
<span class="comments">;-</span>
FUNCTION ajs_schechter,absmag,params,mstar=mstar,alpha=alpha,phistar=phistar, $
                       loglum=loglum
  compile_opt idl2

  IF n_params() EQ 2 THEN BEGIN
      mstar=params[0]
      alpha=params[1]
      phistar=params[2]
  ENDIF 

  absmag=double(absmag)
  IF keyword_set(loglum) THEN BEGIN
      phi = alog(10) * phistar $
            * 10 ^ (- (alpha + 1) * (mstar - absmag)) $
            * exp(-10 ^ (- (mstar - absmag)))
  ENDIF ELSE BEGIN
      phi = 0.4 * alog(10) * phistar $
            * 10 ^ (0.4 * (alpha + 1) * (mstar - absmag)) $
            * exp(-10 ^ (0.4 * (mstar - absmag)))
  ENDELSE

  RETURN,phi
END
</code>
    </div>
  </body>
</html>